# PHP2021
*Задание выполнено в рамках курса повышения квалификации.*

## Задание
>Необходимо реализовать Rest API с использованием очередей. 
>Ваши клиенты будут отправлять запросы на обработку, а вы будете складывать их в очередь и возвращать номер запроса. 
>В фоновом режиме вы будете обрабатывать запросы, а ваши клиенты периодически, используя номер запроса, будут проверять статус его обработки.

## Выполнение

**Использован фреймворк Lumen**

Пример реализации API.

Клиенты отправляют запрос (POST) на генерацию отчета из Frontend формы, на бэк приходит json в формате

>{
> "report_type_id": report_type_id, 
> "destination": TelegramId
>}

Backend отвечает:
>{
> "success": true/false,
> "task_id": task_id,
> "link": "https://YOUR_DOMAIN/api/report_task/task_id"
>}

Задача попадает в очередь и асинхронно обрабатывается.
После завершения генерации отчета сообщение улетает на указанный адрес.

По вышеуказанной ссылке можно отследить статус заявки (GET) (Принята, Обрабатывается, Отправлена или Ошибка).
>{
> "id": task_id,
> "status": "Отправлена",
> "created_at": "00:00 01.01.2021"
>}
